# 日报接口文档 V1.0

## 默认模块

### Base URLs
- 日报测试: `http://test-salebot.yiyouliao.com/api`

## 日报/日报接口

### POST 创建客户日报

**接口地址**: `POST /dailyCustomer/create`

#### Body 请求参数

```json
[
  {
    "source": "客户来源",
    "abbreviation": "客户简称",
    "fullName": "客户全称",
    "dept": "客户部门",
    "industry": "所属行业",
    "base": "公司base",
    "name": "客户姓名",
    "phone": "客户联系电话",
    "wechatCode": "客户微信号",
    "isContact": 0,
    "isCooperation": 0,
    "isOpportunity": 0,
    "opportunityStatus": "商机状态",
    "dailyReport": {
      "reportContent": "日报内容"
    }
  }
]
```

#### 请求参数

| 名称  | 位置  | 类型   | 必选 | 说明 |
|-------|-------|--------|------|------|
| token | header| string | 是   | none |
| body  | body  | DailyCustomer | 是 | none |

#### 返回示例

```json
// 失败返回
{
  "code": 401,
  "msg": "token不能为空"
}

// 成功返回
{
  "code": 200,
  "data": "创建成功",
  "msg": "success"
}
```

#### 返回结果

| 状态码 | 状态码含义 | 说明 | 数据模型 |
|--------|------------|------|----------|
| 200    | OK         | none | string   |

### GET 分页查询客户列表信息

**接口地址**: `GET /dailyCustomer/list`

#### 请求参数

| 名称    | 位置  | 类型    | 必选 | 说明 |
|---------|-------|---------|------|------|
| pageNum | query | integer | 否   | none |
| pageSize| query | integer | 否   | none |
| token   | header| string  | 是   | none |

#### 返回示例

```json
// 失败返回
{
  "code": 9999,
  "msg": "未知异常"
}

// 成功响应
{
  "code": 200,
  "data": {
    "current": 1,
    "hitCount": false,
    "optimizeCountSql": true,
    "orders": [],
    "pages": 0,
    "records": [
      {
        "abbreviation": "无限有限公司2",
        "base": "钱塘区2",
        "createTime": "2026-01-08 15:22:14",
        "createUserId": 2008466854422794241,
        "dailyReport": {
          "createTime": "2026-01-08 17:17:35",
          "createUserId": 2008466854422794241,
          "createUserName": "刘振阳",
          "customerId": 2009163718261039106,
          "id": 2009192750315200513,
          "reportContent": "结案2",
          "updateTime": "2026-01-08 17:17:35"
        },
        "dept": "董事长2",
        "fullName": "无限公司2",
        "id": 2009163718261039106,
        "industry": "航地2",
        "isContact": 1,
        "isCooperation": 1,
        "isOpportunity": 1,
        "name": "小狐狸2",
        "opportunityStatus": "应开票",
        "phone": "19231232",
        "source": "网上2",
        "updateTime": "2026-01-08 17:17:35",
        "wechatCode": "weixinhao11232"
      },
      {
        "abbreviation": "客户简称",
        "base": "公司base",
        "createTime": "2026-01-08 11:17:34",
        "createUserId": 2008466854422794241,
        "dept": "客户部门",
        "fullName": "客户全称",
        "id": 2009102147062534145,
        "industry": "所属行业",
        "isContact": 0,
        "isCooperation": 0,
        "isOpportunity": 0,
        "name": "客户姓名",
        "opportunityStatus": "商机状态",
        "phone": "客户联系电话",
        "source": "客户来源",
        "wechatCode": "客户微信号"
      }
    ],
    "searchCount": true,
    "size": 10,
    "total": 0
  },
  "msg": "success"
}
```

#### 返回结果

| 状态码 | 状态码含义 | 说明 | 数据模型 |
|--------|------------|------|----------|
| 200    | OK         | none | string   |

### GET 日报详情

**接口地址**: `GET /dailyCustomer/detail`

#### 请求参数

| 名称  | 位置   | 类型    | 必选 | 说明 |
| ----- | ------ | ------- | ---- | ---- |
| id    | query  | integer | 是   | none |
| token | header | string  | 是   | none |

#### 返回示例

```json
{
  "code": 200,
  "data": {
    "abbreviation": "无限有限公司",
    "base": "钱塘区",
    "createTime": "2026-01-08 15:22:14",
    "createUserId": 2008466854422794241,
    "dailyCustomerLogs": [
      {
        "batchId": "4ea4cd3dad274435aae4b3ae6ce51297",
        "createTime": "2026-01-08 15:22:14",
        "createUserId": 2008466854422794241,
        "createUserName": "刘振阳",
        "customerId": 2009163718261039106,
        "fieldKey": "all",
        "fieldName": "新增客户",
        "id": 2009163718596583425,
        "newValue": "新增客户记录",
        "oldValue": ""
      },
      {
        "batchId": "d11f2a9d0c4e45329c30cae39fcf88d7",
        "createTime": "2026-01-08 15:25:02",
        "createUserId": 2008466854422794241,
        "createUserName": "刘振阳",
        "customerId": 2009163718261039106,
        "fieldKey": "industry",
        "fieldName": "所属行业",
        "id": 2009164424862851073,
        "newValue": "航天",
        "oldValue": "航海"
      },
      {
        "batchId": "d11f2a9d0c4e45329c30cae39fcf88d7",
        "createTime": "2026-01-08 15:25:02",
        "createUserId": 2008466854422794241,
        "createUserName": "刘振阳",
        "customerId": 2009163718261039106,
        "fieldKey": "opportunityStatus",
        "fieldName": "商机状态",
        "id": 2009164425068371970,
        "newValue": "签合同了",
        "oldValue": "待合作"
      },
      {
        "batchId": "1329697eabc9491791446f583092d905",
        "createTime": "2026-01-08 15:32:28",
        "createUserId": 2008466854422794241,
        "createUserName": "刘振阳",
        "customerId": 2009163718261039106,
        "fieldKey": "industry",
        "fieldName": "所属行业",
        "id": 2009166296432513025,
        "newValue": "航地",
        "oldValue": "航天"
      },
      {
        "batchId": "1329697eabc9491791446f583092d905",
        "createTime": "2026-01-08 15:32:28",
        "createUserId": 2008466854422794241,
        "createUserName": "刘振阳",
        "customerId": 2009163718261039106,
        "fieldKey": "base",
        "fieldName": "公司base",
        "id": 2009166296625451010,
        "newValue": "钱塘区",
        "oldValue": "base"
      },
      {
        "batchId": "1329697eabc9491791446f583092d905",
        "createTime": "2026-01-08 15:32:28",
        "createUserId": 2008466854422794241,
        "createUserName": "刘振阳",
        "customerId": 2009163718261039106,
        "fieldKey": "name",
        "fieldName": "联系人",
        "id": 2009166296830971906,
        "newValue": "小狐狸",
        "oldValue": "巧克力"
      },
      {
        "batchId": "1329697eabc9491791446f583092d905",
        "createTime": "2026-01-08 15:32:28",
        "createUserId": 2008466854422794241,
        "createUserName": "刘振阳",
        "customerId": 2009163718261039106,
        "fieldKey": "wechatCode",
        "fieldName": "微信号",
        "id": 2009166297002938370,
        "newValue": "weixinhao1123",
        "oldValue": "weixinhao"
      }
    ],
    "dailyReports": [
      {
        "createTime": "2026-01-08 15:32:28",
        "createUserId": 2008466854422794241,
        "createUserName": "刘振阳",
        "customerId": 2009163718261039106,
        "id": 2009166297212653569,
        "reportContent": "今日跟进了",
        "updateTime": "2026-01-08 15:32:28"
      },
      {
        "createTime": "2026-01-08 15:31:42",
        "createUserId": 2008466854422794241,
        "createUserName": "刘振阳",
        "customerId": 2009163718261039106,
        "id": 2009166101900693506,
        "reportContent": "今日跟进了",
        "updateTime": "2026-01-08 15:31:42"
      },
      {
        "createTime": "2026-01-08 15:25:02",
        "createUserId": 2008466854422794241,
        "createUserName": "刘振阳",
        "customerId": 2009163718261039106,
        "id": 2009164425278087169,
        "reportContent": "今日跟进了",
        "updateTime": "2026-01-08 15:25:02"
      },
      {
        "createTime": "2026-01-08 15:22:14",
        "createUserId": 2008466854422794241,
        "createUserName": "刘振阳",
        "customerId": 2009163718261039106,
        "id": 2009163718940516353,
        "reportContent": "今日无跟进",
        "updateTime": "2026-01-08 15:22:14"
      }
    ],
    "dept": "董事长",
    "fullName": "无限公司",
    "id": 2009163718261039106,
    "industry": "航地",
    "isContact": 0,
    "isCooperation": 0,
    "isOpportunity": 0,
    "name": "小狐狸",
    "opportunityStatus": "签合同了",
    "phone": "1923123",
    "source": "网上",
    "updateTime": "2026-01-08 15:32:28",
    "wechatCode": "weixinhao1123"
  },
  "msg": "success"
}
```

#### 返回结果

| 状态码 | 状态码含义 | 说明 | 数据模型 |
|--------|------------|------|----------|
| 200    | OK         | none | Inline   |

## 日报/企业微信鉴权

### GET 解析企业微信用户code

**接口地址**: `GET /auth/getToken`

#### 请求参数

| 名称 | 位置  | 类型   | 必选 | 说明 |
|------|-------|--------|------|------|
| code | query | string | 是   | none |

#### 返回示例

```json
// 错误返回
{
  "code": 500,
  "msg": "获取用户token信息失败"
}

// 成功响应
{
  "code": 200,
  "data": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE3Njc5Mjc5MzgsInVzZXJJZCI6IkxpdVpoZW5ZYW5nIn0.NBdEjqouvdK4X1doDAfHkifiD6QrueCxP6mHpHtaF3Y",
  "msg": "success"
}
```

#### 返回结果

| 状态码 | 状态码含义 | 说明 | 数据模型 |
|--------|------------|------|----------|
| 200    | OK         | none | Inline   |

## 数据模型

### DailyCustomer

```json
{
  "id": 0,
  "source": "string",
  "abbreviation": "string",
  "fullName": "string",
  "dept": "string",
  "industry": "string",
  "base": "string",
  "name": "string",
  "phone": "string",
  "wechatCode": "string",
  "isContact": 0,
  "isCooperation": 0,
  "isOpportunity": 0,
  "opportunityStatus": "string",
  "createTime": "string",
  "updateTime": "string",
  "createUserId": 0,
  "dailyReport": {
    "id": 0,
    "createUserId": 0,
    "createTime": "string",
    "updateTime": "string",
    "customerId": 0,
    "reportContent": "string"
  },
  "dailyCustomerLogs": [
    {
      "id": 0,
      "createUserId": 0,
      "createTime": "string",
      "updateTime": "string",
      "customerId": 0,
      "batchId": "string",
      "fieldKey": "string",
      "fieldName": "string",
      "newValue": "string",
      "oldValue": "string"
    }
  ],
  "dailyReports": [
    {
      "id": 0,
      "createUserId": 0,
      "createTime": "string",
      "updateTime": "string",
      "customerId": 0,
      "reportContent": "string"
    }
  ]
}
```

#### 属性

| 名称             | 类型          | 必选 | 约束 | 中文名     | 说明 |
|------------------|---------------|------|------|------------|------|
| id               | integer(int64)| 否   | none |            |      |
| source           | string        | 否   | none | 客户来源   |      |
| abbreviation     | string        | 否   | none | 客户简称   |      |
| fullName         | string        | 否   | none | 客户全称   |      |
| dept             | string        | 否   | none | 客户部门   |      |
| industry         | string        | 否   | none | 所属行业   |      |
| base             | string        | 否   | none | 公司base   |      |
| name             | string        | 否   | none | 客户姓名   |      |
| phone            | string        | 否   | none | 客户联系电话 |    |
| wechatCode       | string        | 否   | none | 客户微信号 |    |
| isContact        | integer       | 否   | none | 是否联系上 |    |
| isCooperation    | integer       | 否   | none | 是否已合作 |    |
| isOpportunity    | integer       | 否   | none | 是否有商机 |    |
| opportunityStatus| string        | 否   | none | 商机状态   |    |
| createTime       | string        | 否   | none | 创建时间   |    |
| updateTime       | string        | 否   | none | 修改时间   |    |
| createUserId     | integer(int64)| 否   | none | 创建用户id |    |
| dailyReport      | DailyReport   | 否   | none | 日报内容   |    |
| dailyCustomerLogs| array         | 否   | none | 客户修改记录 |    |
| dailyReports     | array         | 否   | none | 日报列表   |    |

### DailyReport

```json
{
  "id": 0,
  "createUserId": 0,
  "createTime": "string",
  "updateTime": "string",
  "customerId": 0,
  "reportContent": "string"
}
```

#### 属性

| 名称          | 类型          | 必选 | 约束 | 中文名   | 说明 |
|---------------|---------------|------|------|----------|------|
| id            | integer(int64)| 否   | none | 日报id   |      |
| createUserId  | integer(int64)| 否   | none | 创建人id |      |
| createTime    | string        | 否   | none | 修改时间 |      |
| updateTime    | string        | 否   | none | 修改时间 |      |
| customerId    | integer(int64)| 否   | none | 客户id   |      |
| reportContent | string        | 否   | none | 日报内容 |      |

### DailyCustomerLogs

#### 属性

| 名称         | 类型           | 必选  | 约束 | 中文名 | 说明           |
|------------|--------------|-----|------|------|--------------|
| id         | integer(int64)| false | none |      | 客户修改记录id |
| createUserId | integer(int64)| false | none |      | 创建人id       |
| createTime   | string         | false | none |      | 修改时间       |
| updateTime   | string         | false | none |      | 修改时间       |
| customerId   | integer(int64)| false | none |      | 客户id         |
| batchId      | string         | false | none |      | 修改批次id     |
| fieldKey     | string         | false | none |      | 字段code       |
| fieldName    | string         | false | none |      | 字段名称       |
| newValue     | string         | false | none |      | 新值           |
| oldValue     | string         | false | none |      | 旧值           |
