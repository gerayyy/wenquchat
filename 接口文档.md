问渠素材库接口文档  
（Markdown 版）

---

## 1. 接口概览  
- **描述**：分页检索素材（图片 / 视频 / 音频 …）。  
- **请求方式**：POST（JSON）  
- **响应格式**：统一封装 `{code, message, data}`  

---

## 2. 请求参数（入参）

| 参数名            | 类型       | 必填 | 示例值 / 含义 / 可选范围                     |
|-------------------|------------|------|----------------------------------------------|
| pageNo            | int        | 否   | 1（起始页码，默认 1）                        |
| pageSize          | int        | 否   | 50（单页条数，默认 50）                      |
| materialType      | string     | 否   | "IMAGE" ｜ "VIDEO" ｜ "AUDIO" …              |
| query             | string     | 否   | "晨曦"（模糊搜索关键词）                     |
| usageTypes        | string[]   | 否   | ["POSTER"]（用途枚举，可多选）               |
| tags              | string[]   | 否   | ["晨曦计划"]（标签过滤，可多选）             |
| mediaFormats      | string[]   | 否   | ["JPG","WEBP"]（格式过滤，可多选）           |
| userIds           | string[]   | 否   | []（指定上传者，空数组=不限）                |
| projects          | string[]   | 否   | []（指定项目，空数组=不限）                  |
| industry          | string[]   | 否   | []（行业过滤，空数组=不限）                  |
| themeBelonging    | string[]   | 否   | ["OTHER_TOPIC"]（主题归属，可多选）          |
| customs           | string[]   | 否   | []（业务自定义条件，视场景而定）             |
| createTimeBegin   | string     | 否   | ""（起始时间，格式：yyyy-MM-dd HH:mm:ss）    |
| createTimeEnd     | string     | 否   | ""（结束时间，格式同上）                     |
| order.column      | string     | 否   | "CREATE_TIME"（排序字段）                    |
| order.sortType    | string     | 否   | "DESC" ｜ "ASC"                              |

---

## 3. 响应参数（出参）

### 3.1 根层级
| 参数名  | 类型   | 说明               |
|---------|--------|--------------------|
| code    | int    | 0 表示成功         |
| message | string | 成功提示或其他信息 |
| data    | object | 业务数据，见下表   |

### 3.2 data 分页信息
| 参数名    | 类型  | 说明               |
|-----------|-------|--------------------|
| size      | int   | 本次返回条数       |
| total     | int   | 满足条件总条数     |
| current   | int   | 当前页码           |
| totalPage | int   | 总页数             |
| data      | array | 素材列表，元素结构见 3.3 |

### 3.3 单条素材（data.data[i]）
| 字段名          | 类型     | 示例 / 说明                                    |
|-----------------|----------|------------------------------------------------|
| materialId      | string   | "M1994366385391665152"（全局唯一）            |
| materialName    | string   | "晨曦计划3(4).jpg"                              |
| materialType    | string   | "IMAGE"                                        |
| usageType       | string   | "POSTER"                                       |
| simHash         | string   | "6a06aa351adac9747ea9011014b7d6a9"（去重哈希） |
| description     | string   | 详细描述                                       |
| summary         | string   | 摘要                                           |
| theme           | string   | 主题描述                                       |
| color           | string   | 主色调描述                                     |
| festivalInfo    | string   | "无"（节日标签，无则空）                       |
| tags            | string[] | ["晨曦计划"]                                   |
| custom          | string   | 业务自定义字段                                 |
| project         | string   | "海报"                                         |
| status          | string   | "INIT"（生命周期状态）                         |
| transcodeStatus | int      | 0（转码状态码）                                |
| vectorStatus    | int      | 1（向量状态码）                                |
| createTime      | string   | "2025-11-28 19:22:54"                          |
| updateTime      | string   | "2025-11-28 19:23:08"                          |
| createBy        | string   | "吴曼"                                         |
| updateBy        | string   | "吴曼"                                         |
| score           | float    | 20.818415（相关性得分，可排序）                |
| themeBelonging  | string   | "OTHER_TOPIC"                                  |
| user            | object   | 上传者信息，见 3.4                             |
| mediaInfo       | object   | 媒体属性，见 3.5                               |
| files           | array    | 关联文件列表，见 3.6                           |

### 3.4 user 对象
| 字段名 | 类型   | 示例 / 说明                     |
|--------|--------|---------------------------------|
| name   | string | "吴曼"                          |
| userId | string | "Mavis"（系统唯一账号）        |
| avatar | string | null 或头像 URL                 |

### 3.5 mediaInfo 对象
| 字段名   | 类型   | 示例 / 说明                                                |
|----------|--------|------------------------------------------------------------|
| url      | string | 原始文件 CDN 地址                                          |
| cover    | string | 缩略图 / 视频封面 URL（可为 null）                         |
| width    | number | 1920（像素）                                               |
| height   | number | 1080（像素）                                               |
| size     | number | 577235（字节）                                             |
| format   | string | "jpg"                                                      |
| duration | number | 视频时长（秒），非视频为 0                                 |
| frames   | number | 视频总帧数，非视频为 null                                  |
| fps      | number | 24（帧率），非视频为 0 或 null                             |
| name     | string | 文件名（含扩展名）                                         |

### 3.6 files 数组（关联文件）
| 字段名   | 类型   | 示例 / 说明                     |
|----------|--------|---------------------------------|
| filename | string | "晨曦计划-PPT封面.psd"          |
| url      | string | 下载链接                        |

---

## 4. 调用示例（curl）

```bash
curl -X POST https://api.example.com/material/search \
  -H "Content-Type: application/json" \
  -d '{
        "pageNo": 1,
        "pageSize": 20,
        "materialType": "IMAGE",
        "query": "晨曦",
        "usageTypes": ["POSTER"],
        "tags": ["晨曦计划"],
        "order.column": "CREATE_TIME",
        "order.sortType": "DESC"
      }'
```

---

## 5. 响应示例（200）

```json
{
  "code": 0,
  "message": "success",
  "data": {
    "size": 20,
    "total": 137,
    "current": 1,
    "totalPage": 7,
    "data": [
      {
        "materialId": "M1994366385391665152",
        "materialName": "晨曦计划3(4).jpg",
        "materialType": "IMAGE",
        "usageType": "POSTER",
        "simHash": "6a06aa351adac9747ea9011014b7d6a9",
        "description": "...",
        "summary": "...",
        "theme": "...",
        "color": "蓝色",
        "festivalInfo": "无",
        "tags": ["晨曦计划"],
        "custom": "中国人民财产保险股份有限公司",
        "project": "海报",
        "status": "INIT",
        "transcodeStatus": 0,
        "vectorStatus": 1,
        "createTime": "2025-11-28 19:22:54",
        "updateTime": "2025-11-28 19:23:08",
        "createBy": "吴曼",
        "updateBy": "吴曼",
        "score": 20.818415,
        "themeBelonging": "OTHER_TOPIC",
        "user": {
          "name": "吴曼",
          "userId": "Mavis",
          "avatar": null
        },
        "mediaInfo": {
          "url": "https://xxx.cos.ap-nanjing.myqcloud.com/material/xxx.jpg",
          "cover": null,
          "width": 1920,
          "height": 1080,
          "size": 577235,
          "format": "jpg",
          "duration": 0,
          "frames": null,
          "fps": 0,
          "name": "晨曦计划3(4).jpg"
        },
        "files": [
          {
            "filename": "晨曦计划-PPT封面.psd",
            "url": "https://video-nos.yiyouliao.com/material/xxx.psd"
          }
        ]
      }
    ]
  }
}
```

---

## 6. 错误码

| code | 含义说明               |
|------|------------------------|
| 0    | 成功                   |
| 400  | 参数非法               |
| 401  | 未授权 / token 失效    |
| 500  | 服务端内部错误         |

---

## 7. 修订记录

| 日期       | 版本 | 修订人 | 说明                     |
|------------|------|--------|--------------------------|
| 2025-12-10 | v1.0 | Kimi   | 根据原始表格整理首版文档 |