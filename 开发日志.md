# å¼€å‘æ—¥å¿—

## 2026-01-09 ç¬¬ä¸€æ¬¡å¼€å‘ä¿®æ”¹ï¼šåç«¯æ¥å£å¯¹æ¥

### ä¿®æ”¹æ¦‚è¿°

æœ¬æ¬¡ä¿®æ”¹å®Œæˆäº†å‰ç«¯é¡¹ç›®ä¸åç«¯æ¥å£çš„å®Œæ•´å¯¹æ¥ï¼ŒåŒ…æ‹¬ä¼ä¸šå¾®ä¿¡é‰´æƒã€å®¢æˆ·æ—¥æŠ¥åˆ›å»ºå’Œå®¢æˆ·åˆ—è¡¨æŸ¥è¯¢åŠŸèƒ½ã€‚

**å¼€å‘æ—¶é—´**: 2026å¹´1æœˆ9æ—¥
**ä¿®æ”¹ç±»å‹**: åŠŸèƒ½å¼€å‘ - åç«¯æ¥å£é›†æˆ
**æ¶‰åŠæ¨¡å—**: é‰´æƒæ¨¡å—ã€æ—¥æŠ¥æäº¤ã€å®¢æˆ·åˆ—è¡¨æŸ¥è¯¢

### ğŸ”§ å¼€å‘ç¯å¢ƒé…ç½®

**æµ‹è¯• Code**: `yrKcSIYu08Qh9v4vI8PlXJfLGVx1qphlBqN7yLxL9vM`
**Token æœ‰æ•ˆæœŸ**: 1å¤©
**ä½¿ç”¨æ–¹å¼**: å¼€å‘ç¯å¢ƒä¸‹è‡ªåŠ¨ä½¿ç”¨è¯¥ code è·å– tokenï¼ˆæ— éœ€æ‰‹åŠ¨é…ç½®ï¼‰

> â„¹ï¸ åœ¨å¼€å‘æ¨¡å¼ä¸‹ï¼Œå¦‚æœ URL ä¸­æ²¡æœ‰ä¼ä¸šå¾®ä¿¡çš„ code å‚æ•°ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ä½¿ç”¨ä¸Šè¿°æµ‹è¯• code è°ƒç”¨é‰´æƒæ¥å£è·å– tokenã€‚

---

### ä¿®æ”¹å†…å®¹

#### 1. æ–°å¢æ–‡ä»¶

##### 1.1 API é…ç½®æ–‡ä»¶
- **æ–‡ä»¶è·¯å¾„**: `src/config/api.ts`
- **åŠŸèƒ½**: å®šä¹‰ API åŸºç¡€é…ç½®
- **å†…å®¹**:
  - `API_BASE_URL`: åç«¯ API åŸºç¡€åœ°å€ (`http://test-salebot.yiyouliao.com/api`)
  - `TOKEN_KEY`: Token åœ¨ localStorage ä¸­çš„å­˜å‚¨é”®å
  - `DEV_TEST_CODE`: å¼€å‘ç¯å¢ƒæµ‹è¯• codeï¼ˆç”¨äºæ— ä¼ä¸šå¾®ä¿¡ç¯å¢ƒçš„å¼€å‘æµ‹è¯•ï¼‰

##### 1.2 HTTP è¯·æ±‚å·¥å…·
- **æ–‡ä»¶è·¯å¾„**: `src/utils/request.ts`
- **åŠŸèƒ½**: å°è£…é€šç”¨çš„ HTTP è¯·æ±‚å‡½æ•°
- **ç‰¹æ€§**:
  - è‡ªåŠ¨æ·»åŠ  token åˆ°è¯·æ±‚å¤´
  - URL æŸ¥è¯¢å‚æ•°å¤„ç†
  - ç»Ÿä¸€çš„å“åº”å’Œé”™è¯¯å¤„ç†
  - è‡ªå®šä¹‰ `RequestError` é”™è¯¯ç±»å‹

##### 1.3 é‰´æƒæœåŠ¡
- **æ–‡ä»¶è·¯å¾„**: `src/services/auth.ts`
- **åŠŸèƒ½**: ä¼ä¸šå¾®ä¿¡é‰´æƒç›¸å…³æ¥å£
- **æ¥å£æ–¹æ³•**:
  ```typescript
  getToken(code: string): Promise<string>  // è·å– token
  getStoredToken(): string | null          // è·å–æœ¬åœ° token
  clearToken(): void                        // æ¸…é™¤ token
  ```

##### 1.4 å®¢æˆ·æ—¥æŠ¥æœåŠ¡
- **æ–‡ä»¶è·¯å¾„**: `src/services/dailyCustomer.ts`
- **åŠŸèƒ½**: å®¢æˆ·æ—¥æŠ¥ç›¸å…³æ¥å£
- **æ¥å£æ–¹æ³•**:
  ```typescript
  createDailyCustomer(customers: DailyCustomer[]): Promise<string>
  getDailyCustomerList(pageNum: number, pageSize: number): Promise<PageResult<DailyCustomer>>
  ```
- **æ•°æ®æ¨¡å‹**:
  - `DailyCustomer`: å®¢æˆ·ä¿¡æ¯æ¨¡å‹
  - `DailyReport`: æ—¥æŠ¥å†…å®¹æ¨¡å‹
  - `PageResult<T>`: åˆ†é¡µç»“æœæ¨¡å‹

#### 2. ä¿®æ”¹æ–‡ä»¶

##### 2.1 åº”ç”¨å…¥å£ (src/App.tsx)
**ä¿®æ”¹å†…å®¹**:
- æ–°å¢ä¼ä¸šå¾®ä¿¡é‰´æƒé€»è¾‘
- å®ç° token è‡ªåŠ¨è·å–å’Œå­˜å‚¨
- æ·»åŠ é‰´æƒåŠ è½½çŠ¶æ€é¡µé¢
- æ·»åŠ é‰´æƒå¤±è´¥é”™è¯¯é¡µé¢

**æ ¸å¿ƒé€»è¾‘**:
```typescript
useEffect(() => {
  const authenticate = async () => {
    // 1. æ£€æŸ¥æœ¬åœ°æ˜¯å¦å·²æœ‰ token
    const storedToken = getStoredToken();
    if (storedToken) {
      console.log('å·²å­˜åœ¨ tokenï¼Œè·³è¿‡é‰´æƒ');
      return;
    }

    // 2. ä» URL å‚æ•°è·å–ä¼ä¸šå¾®ä¿¡ code
    const urlParams = new URLSearchParams(window.location.search);
    let code = urlParams.get('code');

    // 3. å¼€å‘ç¯å¢ƒï¼šå¦‚æœæ²¡æœ‰ codeï¼Œä½¿ç”¨æµ‹è¯• code
    if (!code && import.meta.env.DEV) {
      console.log('å¼€å‘ç¯å¢ƒï¼šä½¿ç”¨æµ‹è¯• code è·å– token');
      code = DEV_TEST_CODE;
    }

    // 4. è°ƒç”¨åç«¯æ¥å£è·å– token
    if (code) {
      console.log('æ­£åœ¨è·å– token...');
      await getToken(code);
      console.log('Token è·å–æˆåŠŸ');

      // æ¸…é™¤ URL ä¸­çš„ code å‚æ•°
      window.history.replaceState({}, '', window.location.pathname);
    } else {
      // ç”Ÿäº§ç¯å¢ƒï¼šæ²¡æœ‰ code åˆ™æŠ¥é”™
      setAuthError('æœªæ‰¾åˆ°ä¼ä¸šå¾®ä¿¡æˆæƒç ï¼Œè¯·é€šè¿‡ä¼ä¸šå¾®ä¿¡è¿›å…¥åº”ç”¨');
    }
  };

  authenticate();
}, []);
```

##### 2.2 å¡«å†™æ—¥æŠ¥é¡µé¢ (src/pages/Fill.tsx)
**ä¿®æ”¹å†…å®¹**:
- å®Œå…¨é‡æ„äº†è¡¨å•æ•°æ®ç®¡ç†
- ä¸ºæ‰€æœ‰è¾“å…¥æ¡†æ·»åŠ å—æ§çŠ¶æ€
- å®ç°çœŸå®çš„æ¥å£è°ƒç”¨

**æ ¸å¿ƒæ”¹åŠ¨**:
1. **çŠ¶æ€ç®¡ç†**:
   - `existingClientsForms`: å·²é€‰å®¢æˆ·çš„è¡¨å•æ•°æ®
   - `newClientsForms`: æ–°å®¢æˆ·çš„è¡¨å•æ•°æ®

2. **è¡¨å•åˆå§‹åŒ–**:
   ```typescript
   useEffect(() => {
     // åˆå§‹åŒ–å·²é€‰å®¢æˆ·çš„è¡¨å•æ•°æ®
     const initialForms: Record<string, FormData> = {};
     selectedClients.forEach(client => {
       initialForms[client.id] = {
         source: '',
         abbreviation: client.shortName || '',
         fullName: client.name || '',
         // ... å…¶ä»–å­—æ®µ
       };
     });
     setExistingClientsForms(initialForms);

     // åˆå§‹åŒ–æ–°å®¢æˆ·çš„è¡¨å•æ•°æ®
     const newForms: FormData[] = Array.from({ length: newClientCount }).map(() => ({...}));
     setNewClientsForms(newForms);
   }, [state]);
   ```

3. **æäº¤é€»è¾‘**:
   ```typescript
   const handleSubmit = async () => {
     // æ”¶é›†æ‰€æœ‰è¡¨å•æ•°æ®
     const allCustomers: DailyCustomer[] = [];

     // æ·»åŠ å·²é€‰å®¢æˆ·æ•°æ®
     Object.values(existingClientsForms).forEach(form => {
       allCustomers.push({
         ...form,
         dailyReport: { reportContent: form.reportContent }
       });
     });

     // æ·»åŠ æ–°å®¢æˆ·æ•°æ®
     newClientsForms.forEach(form => {
       allCustomers.push({...});
     });

     // è°ƒç”¨æ¥å£æäº¤
     await createDailyCustomer(allCustomers);
     navigate('/success');
   };
   ```

4. **è¾“å…¥æ¡†ç»‘å®š**:
   - æ‰€æœ‰ `AutoResizeInput`ã€`Input` å’Œ `Textarea` ç»„ä»¶éƒ½æ·»åŠ äº† `value` å’Œ `onChange` å±æ€§
   - å®ç°äº†åŒå‘æ•°æ®ç»‘å®š

##### 2.3 æŸ¥çœ‹å®¢æˆ·é¡µé¢ (src/pages/View.tsx)
**ä¿®æ”¹å†…å®¹**:
- ä» Mock æ•°æ®åˆ‡æ¢åˆ°çœŸå® API è°ƒç”¨
- å®ç°åˆ†é¡µåŠŸèƒ½
- æ·»åŠ åŠ è½½å’Œé”™è¯¯çŠ¶æ€å¤„ç†

**æ ¸å¿ƒæ”¹åŠ¨**:
1. **çŠ¶æ€ç®¡ç†**:
   ```typescript
   const [clients, setClients] = useState<DailyCustomer[]>([]);
   const [loading, setLoading] = useState(true);
   const [error, setError] = useState<string | null>(null);
   const [currentPage, setCurrentPage] = useState(1);
   const [totalPages, setTotalPages] = useState(0);
   const [total, setTotal] = useState(0);
   const pageSize = 9; // 3x3 ç½‘æ ¼
   ```

2. **æ•°æ®åŠ è½½**:
   ```typescript
   useEffect(() => {
     loadClients();
   }, [currentPage]);

   const loadClients = async () => {
     const result = await getDailyCustomerList(currentPage, pageSize);
     setClients(result.records);
     setTotalPages(result.pages);
     setTotal(result.total);
   };
   ```

3. **åˆ†é¡µæ§ä»¶**:
   - æ·»åŠ äº†ä¸Šä¸€é¡µ/ä¸‹ä¸€é¡µæŒ‰é’®
   - æ˜¾ç¤ºå½“å‰é¡µç å’Œæ€»é¡µæ•°
   - æŒ‰é’®åœ¨è¾¹ç•Œæƒ…å†µä¸‹è‡ªåŠ¨ç¦ç”¨

4. **æ•°æ®å±•ç¤ºé€‚é…**:
   - ä» Mock æ•°æ®ç»“æ„é€‚é…åˆ°åç«¯è¿”å›çš„æ•°æ®ç»“æ„
   - ä½¿ç”¨ `abbreviation` å’Œ `fullName` æ›¿ä»£åŸæ¥çš„ `shortName` å’Œ `name`
   - å¸ƒå°”å€¼ä» `contacted` æ”¹ä¸º `isContact`

---

### æ¥å£å¯¹æ¥æ¸…å•

#### å·²å¯¹æ¥æ¥å£

| æ¥å£è·¯å¾„ | è¯·æ±‚æ–¹å¼ | åŠŸèƒ½è¯´æ˜ | å¯¹æ¥ä½ç½® | çŠ¶æ€ |
|---------|---------|---------|---------|------|
| `/auth/getToken` | GET | è·å–ä¼ä¸šå¾®ä¿¡ token | `src/App.tsx` | âœ… å®Œæˆ |
| `/dailyCustomer/create` | POST | åˆ›å»ºå®¢æˆ·æ—¥æŠ¥ | `src/pages/Fill.tsx` | âœ… å®Œæˆ |
| `/dailyCustomer/list` | GET | åˆ†é¡µæŸ¥è¯¢å®¢æˆ·åˆ—è¡¨ | `src/pages/View.tsx` | âœ… å®Œæˆ |

#### æ¥å£å‚æ•°æ˜ å°„

##### 1. GET /auth/getToken
**è¯·æ±‚å‚æ•°**:
- `code` (query): ä¼ä¸šå¾®ä¿¡æˆæƒç 

**å“åº”æ•°æ®**:
```json
{
  "code": 200,
  "data": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...",
  "msg": "success"
}
```

##### 2. POST /dailyCustomer/create
**è¯·æ±‚ä½“**:
```json
[
  {
    "source": "å®¢æˆ·æ¥æº",
    "abbreviation": "å®¢æˆ·ç®€ç§°",
    "fullName": "å®¢æˆ·å…¨ç§°",
    "dept": "å®¢æˆ·éƒ¨é—¨",
    "industry": "æ‰€å±è¡Œä¸š",
    "base": "å…¬å¸base",
    "name": "å®¢æˆ·å§“å",
    "phone": "å®¢æˆ·è”ç³»ç”µè¯",
    "wechatCode": "å®¢æˆ·å¾®ä¿¡å·",
    "isContact": 0,
    "isCooperation": 0,
    "isOpportunity": 0,
    "opportunityStatus": "å•†æœºçŠ¶æ€",
    "dailyReport": {
      "reportContent": "æ—¥æŠ¥å†…å®¹"
    }
  }
]
```

**å“åº”æ•°æ®**:
```json
{
  "code": 200,
  "data": "åˆ›å»ºæˆåŠŸ",
  "msg": "success"
}
```

##### 3. GET /dailyCustomer/list
**è¯·æ±‚å‚æ•°**:
- `pageNum` (query): é¡µç ï¼Œé»˜è®¤ 1
- `pageSize` (query): æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ 10

**å“åº”æ•°æ®**:
```json
{
  "code": 200,
  "data": {
    "current": 1,
    "pages": 5,
    "total": 50,
    "records": [
      {
        "id": 2009102147062534145,
        "abbreviation": "å®¢æˆ·ç®€ç§°",
        "fullName": "å®¢æˆ·å…¨ç§°",
        "dept": "å®¢æˆ·éƒ¨é—¨",
        "industry": "æ‰€å±è¡Œä¸š",
        "base": "å…¬å¸base",
        "name": "å®¢æˆ·å§“å",
        "phone": "å®¢æˆ·è”ç³»ç”µè¯",
        "wechatCode": "å®¢æˆ·å¾®ä¿¡å·",
        "isContact": 0,
        "isCooperation": 0,
        "isOpportunity": 0,
        "opportunityStatus": "å•†æœºçŠ¶æ€",
        "createTime": "2026-01-08 11:17:34",
        "updateTime": "2026-01-08 11:17:34",
        "createUserId": 2008466854422794241
      }
    ]
  },
  "msg": "success"
}
```

---

### æŠ€æœ¯å®ç°ç»†èŠ‚

#### 1. é‰´æƒæœºåˆ¶
- **Token å­˜å‚¨**: ä½¿ç”¨ `localStorage` å­˜å‚¨ tokenï¼Œé”®åä¸º `wework_token`
- **Token ä¼ é€’**: æ‰€æœ‰éœ€è¦é‰´æƒçš„è¯·æ±‚åœ¨è¯·æ±‚å¤´ä¸­æ·»åŠ  `token` å­—æ®µ
- **é‰´æƒæµç¨‹**:
  1. ç”¨æˆ·é€šè¿‡ä¼ä¸šå¾®ä¿¡è¿›å…¥åº”ç”¨ï¼ŒURL æºå¸¦ `code` å‚æ•°
  2. åº”ç”¨å¯åŠ¨æ—¶æ£€æµ‹åˆ° `code`ï¼Œè°ƒç”¨ `/auth/getToken` è·å– token
  3. Token ä¿å­˜åˆ° `localStorage`
  4. åç»­è¯·æ±‚è‡ªåŠ¨ä» `localStorage` è¯»å– token

#### 2. è¡¨å•çŠ¶æ€ç®¡ç†
- **å·²é€‰å®¢æˆ·**: ä½¿ç”¨ `Record<string, FormData>` ç±»å‹ï¼Œä»¥å®¢æˆ· ID ä¸ºé”®
- **æ–°å®¢æˆ·**: ä½¿ç”¨ `FormData[]` æ•°ç»„
- **æ•°æ®åˆå§‹åŒ–**: åœ¨ `useEffect` ä¸­æ ¹æ®è·¯ç”±ä¼ é€’çš„ state åˆå§‹åŒ–è¡¨å•
- **åŒå‘ç»‘å®š**: æ‰€æœ‰è¾“å…¥ç»„ä»¶ä½¿ç”¨ `value` å’Œ `onChange` å®ç°å—æ§ç»„ä»¶

#### 3. åˆ†é¡µå®ç°
- **å‰ç«¯åˆ†é¡µ**: ä½¿ç”¨ `currentPage` å’Œ `pageSize` æ§åˆ¶
- **åç«¯æ”¯æŒ**: åç«¯è¿”å› `current`ã€`pages`ã€`total` ç­‰åˆ†é¡µä¿¡æ¯
- **äº¤äº’ä¼˜åŒ–**:
  - é¡µç è¾¹ç•Œæ—¶ç¦ç”¨å¯¹åº”æŒ‰é’®
  - åŠ è½½æ—¶ç¦ç”¨ç¿»é¡µæŒ‰é’®
  - æ˜¾ç¤ºå½“å‰é¡µ/æ€»é¡µæ•°

#### 4. é”™è¯¯å¤„ç†
- **è‡ªå®šä¹‰é”™è¯¯ç±»**: `RequestError` åŒ…å« `code` å’Œ `message`
- **é”™è¯¯å±•ç¤º**:
  - æ¥å£é”™è¯¯åœ¨é¡µé¢ä¸Šæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
  - æä¾›é‡è¯•æŒ‰é’®
- **ç½‘ç»œå¼‚å¸¸**: æ•è·å¹¶å±•ç¤ºå‹å¥½çš„é”™è¯¯æç¤º

---

### æ•°æ®å­—æ®µæ˜ å°„

#### Mock æ•°æ® â†’ åç«¯æ¥å£

| Mock å­—æ®µ | æ¥å£å­—æ®µ | ç±»å‹è½¬æ¢ | è¯´æ˜ |
|----------|----------|---------|------|
| `shortName` | `abbreviation` | - | å®¢æˆ·ç®€ç§° |
| `name` | `fullName` | - | å®¢æˆ·å…¨ç§° |
| `department` | `dept` | - | éƒ¨é—¨ |
| `contactPerson` | `name` | - | å¯¹æ¥äººå§“å |
| `contactInfo` | `phone` | - | è”ç³»ç”µè¯ |
| `wechat` | `wechatCode` | - | å¾®ä¿¡å· |
| `contacted` | `isContact` | `boolean â†’ number` | æ˜¯å¦è”ç³» |
| `cooperated` | `isCooperation` | `boolean â†’ number` | æ˜¯å¦åˆä½œ |
| `hasBusiness` | `isOpportunity` | `boolean â†’ number` | æ˜¯å¦æœ‰å•†æœº |
| `businessStatus` | `opportunityStatus` | - | å•†æœºçŠ¶æ€ |
| - | `source` | - | æ–°å¢ï¼šå®¢æˆ·æ¥æº |

---

### å¾…å®ŒæˆåŠŸèƒ½

#### 1. å†å²è®°å½•åŠŸèƒ½
- **å½“å‰çŠ¶æ€**: View é¡µé¢çš„"æŸ¥çœ‹å†å²"æŒ‰é’®æ˜¾ç¤ºå¾…å®ç°æç¤º
- **éœ€æ±‚**: éœ€è¦åç«¯æä¾›å®¢æˆ·å†å²è®°å½•æŸ¥è¯¢æ¥å£
- **å»ºè®®æ¥å£**: `GET /dailyCustomer/history/{customerId}`

#### 2. æ—¥æœŸè¿‡æ»¤
- **å½“å‰çŠ¶æ€**: View é¡µé¢çš„"å…¨éƒ¨/æ˜¨æ—¥/æœ¬å‘¨"ç­›é€‰ UI å·²å®ç°ï¼Œä½†é€»è¾‘æœªå®Œå–„
- **éœ€æ±‚**: æ ¹æ®åç«¯è¿”å›çš„ `createTime` æˆ– `updateTime` å­—æ®µå®ç°æ—¥æœŸç­›é€‰
- **å®ç°ä½ç½®**: `src/pages/View.tsx` çš„ `filteredClients` è¿‡æ»¤é€»è¾‘

#### 3. Prepare é¡µé¢æ•°æ®åŠ è½½
- **å½“å‰çŠ¶æ€**: Prepare é¡µé¢ä»ç„¶ä½¿ç”¨ Mock æ•°æ®åŠ è½½å®¢æˆ·åˆ—è¡¨
- **éœ€æ±‚**: å¯èƒ½éœ€è¦è°ƒç”¨å®¢æˆ·åˆ—è¡¨æ¥å£é¢„åŠ è½½å·²æœ‰å®¢æˆ·
- **å»ºè®®**: å¤ç”¨ `getDailyCustomerList` æ¥å£

---

### æ³¨æ„äº‹é¡¹

#### å¼€å‘ç¯å¢ƒ

1. **é‰´æƒé…ç½®**:
   - âœ… **è‡ªåŠ¨é‰´æƒ**: å¼€å‘ç¯å¢ƒä¸‹ä¼šè‡ªåŠ¨ä½¿ç”¨æµ‹è¯• code (`yrKcSIYu08Qh9v4vI8PlXJfLGVx1qphlBqN7yLxL9vM`) è·å– token
   - âœ… **Token æŒä¹…åŒ–**: Token ä¿å­˜åœ¨ localStorage ä¸­ï¼Œåˆ·æ–°é¡µé¢ä¸ä¼šé‡æ–°è¯·æ±‚
   - âš ï¸ **Token æœ‰æ•ˆæœŸ**: æµ‹è¯• token æœ‰æ•ˆæœŸä¸º 1å¤©ï¼Œè¿‡æœŸåéœ€æ¸…é™¤ localStorage é‡æ–°è·å–
   - ğŸ’¡ **æ‰‹åŠ¨æ¸…é™¤ Token**: åœ¨æµè§ˆå™¨æ§åˆ¶å°æ‰§è¡Œ `localStorage.removeItem('wework_token')` å¯æ¸…é™¤ token

2. **å¯åŠ¨é¡¹ç›®**:
   ```bash
   cd daily-report-web
   npm install
   npm run dev
   ```
   é¦–æ¬¡å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨è°ƒç”¨é‰´æƒæ¥å£è·å– tokenï¼ŒæˆåŠŸåå³å¯æ­£å¸¸ä½¿ç”¨ã€‚

3. **CORS è·¨åŸŸé—®é¢˜**:
   - å¦‚æœé‡åˆ°è·¨åŸŸé—®é¢˜ï¼Œéœ€è¦åœ¨ vite.config.ts ä¸­é…ç½®ä»£ç†
   - æˆ–è”ç³»åç«¯æ·»åŠ  CORS å“åº”å¤´

#### ç”Ÿäº§ç¯å¢ƒ
1. **API åœ°å€é…ç½®**:
   - å½“å‰ç¡¬ç¼–ç ä¸ºæµ‹è¯•ç¯å¢ƒåœ°å€
   - ç”Ÿäº§ç¯å¢ƒéœ€è¦ä¿®æ”¹ `src/config/api.ts` ä¸­çš„ `API_BASE_URL`
   - å»ºè®®ä½¿ç”¨ç¯å¢ƒå˜é‡ç®¡ç†ï¼š`import.meta.env.VITE_API_BASE_URL`

2. **Token è¿‡æœŸå¤„ç†**:
   - å½“å‰æœªå®ç° token è¿‡æœŸè‡ªåŠ¨åˆ·æ–°
   - å¦‚æœæ¥å£è¿”å› 401 é”™è¯¯ï¼Œå»ºè®®æ¸…é™¤ token å¹¶é‡æ–°é‰´æƒ

3. **æ•°æ®æ ¡éªŒ**:
   - å½“å‰æœªå¯¹è¡¨å•æ•°æ®è¿›è¡Œå‰ç«¯æ ¡éªŒ
   - å»ºè®®æ·»åŠ å¿…å¡«é¡¹æ ¡éªŒå’Œæ ¼å¼æ ¡éªŒ

---

### æµ‹è¯•å»ºè®®

#### 1. é‰´æƒæµç¨‹æµ‹è¯•
- [x] å¼€å‘ç¯å¢ƒå¯åŠ¨ï¼ŒéªŒè¯è‡ªåŠ¨ä½¿ç”¨æµ‹è¯• code è·å– token
- [ ] é€šè¿‡ä¼ä¸šå¾®ä¿¡è¿›å…¥åº”ç”¨ï¼ŒéªŒè¯ token è·å–ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
- [x] åˆ·æ–°é¡µé¢ï¼ŒéªŒè¯ token æŒä¹…åŒ–
- [x] æ¸…é™¤ localStorageï¼ŒéªŒè¯é‡æ–°é‰´æƒæµç¨‹
- [ ] Token è¿‡æœŸåéªŒè¯é”™è¯¯æç¤º

#### 2. æ—¥æŠ¥æäº¤æµ‹è¯•
- [ ] æäº¤å·²é€‰å®¢æˆ·æ—¥æŠ¥
- [ ] æäº¤æ–°å®¢æˆ·æ—¥æŠ¥
- [ ] åŒæ—¶æäº¤å·²é€‰å®¢æˆ·å’Œæ–°å®¢æˆ·
- [ ] æµ‹è¯•ç½‘ç»œé”™è¯¯æƒ…å†µ

#### 3. å®¢æˆ·åˆ—è¡¨æµ‹è¯•
- [ ] éªŒè¯å®¢æˆ·åˆ—è¡¨åŠ è½½
- [ ] æµ‹è¯•åˆ†é¡µåŠŸèƒ½
- [ ] æµ‹è¯•æœç´¢åŠŸèƒ½
- [ ] æµ‹è¯•åŠ è½½å¤±è´¥é‡è¯•

#### 4. è¾¹ç•Œæƒ…å†µæµ‹è¯•
- [ ] æ— æ•°æ®æƒ…å†µ
- [ ] ç½‘ç»œæ–­å¼€æƒ…å†µ
- [ ] Token æ— æ•ˆæƒ…å†µ
- [ ] æ¥å£è¿”å›å¼‚å¸¸æ•°æ®

---

### æ–‡ä»¶å˜æ›´æ¸…å•

#### æ–°å¢æ–‡ä»¶ (4ä¸ª)
```
src/config/api.ts
src/utils/request.ts
src/services/auth.ts
src/services/dailyCustomer.ts
```

#### ä¿®æ”¹æ–‡ä»¶ (3ä¸ª)
```
src/App.tsx
src/pages/Fill.tsx
src/pages/View.tsx
```

#### æœªä¿®æ”¹ä½†ç›¸å…³çš„æ–‡ä»¶
```
src/pages/Home.tsx        # é¦–é¡µï¼Œæœªä¿®æ”¹
src/pages/Prepare.tsx     # å‡†å¤‡é¡µé¢ï¼Œä»ä½¿ç”¨ Mock æ•°æ®
src/pages/Success.tsx     # æˆåŠŸé¡µé¢ï¼Œæœªä¿®æ”¹
src/data/mock.ts          # Mock æ•°æ®ï¼Œä¿ç•™ç”¨äºå¼€å‘
```

---

### æäº¤ä¿¡æ¯å»ºè®®

```bash
git add .
git commit -m "feat: å®Œæˆåç«¯æ¥å£å¯¹æ¥

- å®ç°ä¼ä¸šå¾®ä¿¡é‰´æƒæµç¨‹
- å®Œæˆå®¢æˆ·æ—¥æŠ¥åˆ›å»ºæ¥å£å¯¹æ¥
- å®Œæˆå®¢æˆ·åˆ—è¡¨æŸ¥è¯¢å’Œåˆ†é¡µåŠŸèƒ½
- æ·»åŠ  API é…ç½®å’Œè¯·æ±‚å·¥å…·
- åˆ›å»º auth å’Œ dailyCustomer æœåŠ¡å±‚
- æ›´æ–° Fill å’Œ View é¡µé¢ä½¿ç”¨çœŸå®æ¥å£

ç›¸å…³æ¥å£:
- GET /auth/getToken
- POST /dailyCustomer/create
- GET /dailyCustomer/list
"
```

---

### ç›¸å…³æ–‡æ¡£

- æ¥å£æ–‡æ¡£: `æ—¥æŠ¥æ¥å£V1.0-ä¼˜åŒ–ç‰ˆ.md`
- é¡¹ç›® README: å¾…è¡¥å……
- API æ–‡æ¡£: å¾…è¡¥å……

---

**æ–‡æ¡£æ›´æ–°æ—¶é—´**: 2026-01-09
**æ–‡æ¡£ç»´æŠ¤è€…**: Claude Code
**ä¸‹æ¬¡æ›´æ–°è®¡åˆ’**: å®Œæˆå†å²è®°å½•åŠŸèƒ½åæ›´æ–°
